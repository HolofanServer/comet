# C.O.M.E.T. Discord Bot 機能一覧

C.O.M.E.T. (Community of Oshilove Moderation & Enjoyment Together) は、HFS - ホロライブ非公式ファンサーバーのための多機能Discordボットです。

## セキュリティ & モデレーション機能

### AUS (Art Unauthorized-repost Shield) - 無断転載検出システム
- 画像検出機能
  - SauceNAO APIによる画像ソース検索
  - Google Cloud Vision APIによる画像分析
  - 自動転載検出とアラート
- 絵師認証システム
  - 絵師の本人確認機能
  - 認証済み絵師のホワイトリスト管理
- モデレーション機能
  - 疑わしい投稿の自動フラグ付け
  - チケットシステムによる報告管理
  - モデレーターへの通知

### 通報システム
- メッセージ通報機能 (`/reportmsg`)
  - 不適切なメッセージを管理者に通報
  - 複数の通報理由から選択可能
  - 通報理由の詳細選択UI
- ユーザー通報機能 (`/reportuser`)
  - 問題のあるユーザーを管理者に通報
  - 詳細な通報理由を選択可能
  - カスタムUIによる理由選択

### ユーザー警告システム
- 警告の記録と管理
- 警告履歴の追跡
- 段階的な処罰システム

### タグモデレーション
- 不適切なタグの検出
- タグの自動フィルタリング
- カスタムタグルール設定

### ログ機能
- メッセージ管理（削除・編集履歴の記録）
- メンバー管理（参加/退出、BAN/解除の記録）
- ボイスチャット監視（入退室、チャンネル移動の追跡）

## コミュニティエンゲージメント機能

### ランク/レベルシステム
- 高度なXP計算システム
  - メッセージ品質に基づくXP付与
  - AI品質分析による評価
- カスタムレベル公式
  - 柔軟なレベルアップ条件設定
- ボイスアクティビティ追跡
  - VC参加時間の記録
  - ボイス活動によるXP付与
- 実績システム
  - ゲーミフィケーション要素
  - 達成バッジの付与

### おみくじシステム
- 日次おみくじ (`/omikuji`)
  - ホロライブキャラクター対応
  - 連続記録（ストリーク）追跡
  - 特別な結果（ホロ超大吉、エリートチャンス）
  - PostgreSQLによるデータ永続化

### 推しロールパネル
- インタラクティブなロール選択UI
  - CV2コンポーネントによるリッチなUI
  - カテゴリ別メンバー選択
- ロール分析機能
  - 人気ロールの統計
  - ユーザー選択履歴

### ギブアウェイシステム
- ギブアウェイ作成 (`/giveaway`)
  - 期間設定、賞品設定
  - 自動リアクション、当選者自動選出
- 当選者再抽選 (`/reroll`)

### ウェルカムメッセージ
- 多言語対応のウェルカムメッセージ
- カスタマイズ可能なメッセージテンプレート

## ストリーム通知機能

### VTuber配信通知システム
- Holodex API連携
  - ホロライブメンバーの配信情報取得
  - ライブ配信・予定配信の追跡
- ライブ通知
  - Webhookによるリアルタイム通知
  - 配信開始・終了の自動通知
- 予定配信管理
  - 今後の配信スケジュール表示
  - 埋め込みメッセージの自動更新
- チャンネル名自動更新
  - 配信状況に応じたチャンネル名変更
  - ライブ中の絵文字表示

## ボイス機能

### ボイス録音システム
- VC録音機能
- 録音データの管理
- Whisper APIによる文字起こし対応

### VC通知
- ボイスチャット参加通知
- 入退室のログ記録

## ウェブサイト統合機能

### サーバーアナライザー
- リアルタイムサーバー統計
- メンバー数、アクティビティの分析

### HFSメンバーカード
- HFS API連携によるプロフィール表示
- ユーザー統計情報の表示

### スタッフマネージャー
- スタッフ情報の管理
- 権限管理システム

## ユーティリティ機能

### アナウンスメント
- 新規アナウンスメント機能
  - スレッドモデレーション
  - 投票機能
- カスタムアナウンスメント
  - CV2フレームワークによるリッチなUI
  - セッションベースの作成フロー

### Bump通知
- タイマー機能
- 自動通知システム

### ピン留め機能
- メッセージのピン留め管理

### サーバー統計
- 詳細なサーバー情報表示

### FAQ自動送信
- よくある質問の自動応答

## システム機能

### BOT管理
- Cog管理（ホットリロード対応）
- データベースマイグレーション
- ヘルプシステム

### 監視システム
- Uptime Kuma連携
  - ステータス監視
  - 60秒間隔のハートビート
- Sentry連携
  - エラートラッキング
- Prometheus連携
  - パフォーマンスメトリクス

### プレゼンス制御
- 動的ステータス更新
- 時間帯に応じた挨拶メッセージ
- メンバー数表示

## イベントハンドラー

### メッセージ監視
- キーワード検出
- 自動リアクション
- パターンマッチング

### メンバー管理
- 参加時の自動処理
- 退出時の後処理
- ロール変更の監視

### インタラクション
- ボタン処理
- セレクトメニュー
- モーダル対応

## 技術スタック

- **言語**: Python 3.11+
- **フレームワーク**: discord.py 2.5+
- **データベース**: PostgreSQL with asyncpg
- **外部API**: Holodex, SauceNAO, Google Cloud Vision, OpenAI, Sentry
- **監視**: Uptime Kuma, Prometheus
